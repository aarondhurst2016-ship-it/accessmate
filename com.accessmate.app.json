{
    "app-id": "com.accessmate.app",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "23.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "accessmate",
    "finish-args": [
        "--share=ipc",
        "--socket=x11",
        "--socket=wayland",
        "--socket=pulseaudio",
        "--device=dri",
        "--share=network",
        "--persist=.accessmate",
        "--filesystem=home:ro",
        "--filesystem=xdg-documents",
        "--filesystem=xdg-download",
        "--filesystem=xdg-music:ro",
        "--filesystem=xdg-pictures:ro",
        "--filesystem=xdg-videos:ro",
        "--talk-name=org.freedesktop.Notifications",
        "--talk-name=org.gtk.vfs.*",
        "--env=PYTHONPATH=/app/lib/python3.11/site-packages"
    ],
    "modules": [
        {
            "name": "python3-pip",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} pip setuptools wheel"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/p/pip/pip-23.3.1.tar.gz",
                    "sha256": "1fcaa041308d01f14575f6d0d2ea4b75a3e2871fe4f9c694976f908768e14174"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/s/setuptools/setuptools-69.0.2.tar.gz",
                    "sha256": "735896e78a4742605974de002ac60562d286fa8051a7e2299445e8e8fbb01aa6"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/w/wheel/wheel-0.42.0.tar.gz",
                    "sha256": "c45be39f7882c9d34243236f2d63cbd58039e360f85d0913425fbd7ceea617a8"
                }
            ]
        },
        {
            "name": "python3-dependencies",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} tkinter Pillow pygame numpy requests speechrecognition pyttsx3 psutil"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/P/Pillow/Pillow-10.1.0.tar.gz",
                    "sha256": "e6bf8de6c36ed96c86ea3b6e1d5273c53f46ef518a062464cd7ef5dd2cf92e38"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/p/pygame/pygame-2.5.2.tar.gz",
                    "sha256": "c1b89eb5d539e7ac5cf75513125fb5f2f0a2d918b1fd6e981f23bf0ac1b1c24a"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/n/numpy/numpy-1.26.2.tar.gz",
                    "sha256": "f65738447676ab5777f11e6bbbdb8ce11b785e105f690bc45966574816b6d3ea"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/r/requests/requests-2.31.0.tar.gz",
                    "sha256": "942c5a758f98d790eaed1a29cb6eefc7ffb0d1cf7af05c3d2791656dbd6ad1e1"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/S/SpeechRecognition/SpeechRecognition-3.10.0.tar.gz",
                    "sha256": "29b7e6914cabcd7e119e0db35b2d0b4c8a9f33bc6e3b5de28e8c3e4ca9e6e5ad"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/p/pyttsx3/pyttsx3-2.90.tar.gz",
                    "sha256": "917a2c1567ec8d8aa8d4c5c8cf04a131b32b59bc1f0b8ac9a96c5ad2b0e16a8d"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/source/p/psutil/psutil-5.9.6.tar.gz",
                    "sha256": "e4b92ddcd7dd4cdd3f900180ea1e104932c7bce234fb88976e2a3b296441225a"
                }
            ]
        },
        {
            "name": "accessmate",
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p /app/share/applications",
                "mkdir -p /app/share/icons/hicolor/256x256/apps",
                "mkdir -p /app/bin",
                "cp -r src /app/",
                "cp -r requirements.txt /app/",
                "cp src/accessmate_logo.png /app/share/icons/hicolor/256x256/apps/com.accessmate.app.png",
                "install -Dm755 linux_entry.py /app/bin/accessmate",
                "install -Dm644 com.accessmate.app.desktop /app/share/applications/",
                "install -Dm644 com.accessmate.app.metainfo.xml /app/share/metainfo/"
            ],
            "sources": [
                {
                    "type": "dir",
                    "path": "."
                }
            ]
        }
    ]
}