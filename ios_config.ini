# iOS Build Configuration for AccessMate
# This file contains configuration settings for building AccessMate on iOS

[app]
title = AccessMate
package.name = accessmate
package.domain = com.accessmate

# Version information
version = 1.0.0
version.regex = __version__ = ['\"](.*?)['\""]
version.filename = %(source.dir)s/src/version.py

# Source code and entry point
source.dir = .
source.include_exts = py,png,jpg,kv,atlas,txt,json
source.include_patterns = assets/*,mobial/*,src/*
source.exclude_dirs = build,dist,__pycache__,.git,.github,Output,build_*
source.exclude_patterns = *.pyc,*~,build.py,*.spec

# Main Python file for iOS
main.py = ios_entry.py

# iOS specific settings
[ios]
# Bundle identifier (must match Apple Developer account)
bundle_id = com.accessmate.app

# iOS deployment target (minimum iOS version)
deployment_target = 12.0

# Architecture support
archs = arm64

# App icons (will be copied from mobile_icons/ios/)
icon = mobile_icons/ios/Icon-60x60@3x.png

# Launch screen
splash = assets/accessmate_logo.png
splash.background_color = #FFFFFF

# App permissions and capabilities
permissions = MICROPHONE,SPEECH_RECOGNITION,CAMERA

# Info.plist additions
info_plist_additions = {
    'NSMicrophoneUsageDescription': 'AccessMate requires microphone access for voice commands and speech recognition.',
    'NSSpeechRecognitionUsageDescription': 'AccessMate uses speech recognition to provide voice-controlled accessibility features.',
    'NSCameraUsageDescription': 'AccessMate uses camera for object detection and visual assistance features.',
    'UIRequiredDeviceCapabilities': ['microphone'],
    'UIBackgroundModes': ['audio'],
    'LSRequiresIPhoneOS': True,
    'UIStatusBarHidden': False,
    'UISupportedInterfaceOrientations': [
        'UIInterfaceOrientationPortrait',
        'UIInterfaceOrientationPortraitUpsideDown',
        'UIInterfaceOrientationLandscapeLeft',
        'UIInterfaceOrientationLandscapeRight'
    ]
}

# iOS frameworks to link
frameworks = AVFoundation,Speech,CoreML,Vision

# Code signing (set via environment variables)
# ACCESSMATE_TEAM_ID = Your Apple Developer Team ID
# ACCESSMATE_PROVISIONING_PROFILE = Your provisioning profile UUID

[kivy-ios]
# kivy-ios specific configuration
toolchain_version = master
python_version = 3.11
kivy_version = 2.3.1

# Dependencies to build with kivy-ios
dependencies = python3,kivy,pillow,requests,certifi

# iOS SDK path (usually auto-detected)
# ios_sdk_path = /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk

[build]
# Build optimization
optimization = speed
debug = false

# Excluded Python modules (iOS incompatible)
exclude_modules = tkinter,pygame,matplotlib,scipy,pandas,pyaudio,sounddevice

# Include only essential packages
requirements = kivy,pillow,requests,certifi,plyer

[signing]
# Code signing configuration
# These should be set as environment variables for security
# 
# Required environment variables:
# - ACCESSMATE_TEAM_ID: Your Apple Developer Team ID  
# - ACCESSMATE_BUNDLE_ID: Your app's bundle identifier
# - ACCESSMATE_PROVISIONING_PROFILE: Provisioning profile UUID (optional)
# - ACCESSMATE_SIGNING_IDENTITY: Signing certificate name (optional)
#
# Example:
# export ACCESSMATE_TEAM_ID="ABC123DEF4"
# export ACCESSMATE_BUNDLE_ID="com.yourcompany.accessmate"

[distribution]
# App Store distribution settings
app_store_team_id = ${ACCESSMATE_TEAM_ID}
export_method = app-store

# TestFlight beta distribution
# export_method = ad-hoc

[metadata]
# App metadata for App Store
name = AccessMate
subtitle = Voice-Controlled Accessibility Assistant
description = AccessMate provides voice-controlled accessibility features including text-to-speech, speech recognition, and assistive tools for users with visual or motor impairments.

# Keywords for App Store search
keywords = accessibility,voice control,text to speech,speech recognition,assistive technology,disability support

# App Store categories
primary_category = Medical
secondary_category = Utilities

# Age rating
age_rating = 4+

# Privacy and data usage
privacy_policy_url = https://accessmate.com/privacy
support_url = https://accessmate.com/support
marketing_url = https://accessmate.com

[testing]
# Testing configuration
simulator_device = iPhone 15
simulator_os = latest

# TestFlight groups
testflight_groups = internal,beta

[automation]
# CI/CD settings for automated builds
build_server = github_actions
archive_path = build/ios/
export_path = build/ios/archive/

# GitHub Actions integration
github_secrets_required = [
    'APPLE_DEVELOPER_TEAM_ID',
    'APPLE_BUNDLE_ID', 
    'APPLE_SIGNING_CERTIFICATE_P12',
    'APPLE_SIGNING_CERTIFICATE_PASSWORD',
    'APPLE_PROVISIONING_PROFILE'
]